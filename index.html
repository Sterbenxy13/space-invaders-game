<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Space Invaders</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: #000;
            font-family: Arial, sans-serif;
        }

        #gameContainer {
            position: relative;
            width: 800px;
            height: 600px;
            background: linear-gradient(to bottom, #0a0e27, #1a1a2e);
            border: 3px solid #00ff00;
            overflow: hidden;
            box-shadow: 0 0 20px rgba(0, 255, 0, 0.5);
        }

        #gameInfo {
            position: absolute;
            top: 10px;
            left: 10px;
            color: #00ff00;
            font-size: 18px;
            z-index: 100;
            text-shadow: 0 0 10px #00ff00;
        }

        #score, #lives {
            margin-bottom: 10px;
        }

        .player {
            position: absolute;
            bottom: 20px;
            width: 40px;
            height: 40px;
            background: linear-gradient(to top, #00ff00, #00aa00);
            clip-path: polygon(50% 0%, 100% 100%, 75% 75%, 25% 75%, 0% 100%);
            border: 2px solid #00ff00;
            box-shadow: 0 0 10px #00ff00;
        }

        .enemy {
            position: absolute;
            width: 40px;
            height: 40px;
            background: linear-gradient(to bottom, #ff0000, #aa0000);
            clip-path: polygon(50% 100%, 100% 0%, 75% 25%, 25% 25%, 0% 0%);
            border: 2px solid #ff0000;
            box-shadow: 0 0 10px #ff0000;
        }

        .projectile {
            position: absolute;
            width: 5px;
            height: 15px;
            background: #00ff00;
            box-shadow: 0 0 5px #00ff00;
        }

        .obstacle {
            position: absolute;
            width: 30px;
            height: 30px;
            background: #ffaa00;
            border: 2px solid #ffaa00;
            box-shadow: 0 0 5px #ffaa00;
            clip-path: polygon(30% 0%, 70% 0%, 100% 30%, 100% 70%, 70% 100%, 30% 100%, 0% 70%, 0% 30%);
        }

        #gameOverScreen {
            display: none;
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 200;
            justify-content: center;
            align-items: center;
            flex-direction: column;
        }

        #gameOverScreen.show {
            display: flex;
        }

        #gameOverText {
            color: #00ff00;
            font-size: 48px;
            margin-bottom: 20px;
            text-shadow: 0 0 20px #00ff00;
        }

        #finalScore {
            color: #00ff00;
            font-size: 24px;
            margin-bottom: 30px;
            text-shadow: 0 0 10px #00ff00;
        }

        #restartBtn {
            padding: 15px 40px;
            font-size: 20px;
            background: #00ff00;
            color: #000;
            border: none;
            cursor: pointer;
            border-radius: 5px;
            font-weight: bold;
            transition: all 0.3s;
        }

        #restartBtn:hover {
            background: #00aa00;
            box-shadow: 0 0 20px #00ff00;
        }

        #instructions {
            position: absolute;
            bottom: 10px;
            right: 10px;
            color: #00ff00;
            font-size: 12px;
            text-align: right;
            text-shadow: 0 0 10px #00ff00;
        }
    </style>
</head>
<body>
    <div id="gameContainer">
        <div id="gameInfo">
            <div id="score">Score: 0</div>
            <div id="lives">Lives: 3</div>
        </div>
        <div id="instructions">
            <div>← → Arrow Keys to Move</div>
            <div>SPACE to Shoot</div>
        </div>
        <div id="gameOverScreen">
            <div id="gameOverText">GAME OVER</div>
            <div id="finalScore">Final Score: 0</div>
            <button id="restartBtn">RESTART GAME</button>
        </div>
    </div>

    <script>
        const gameContainer = document.getElementById('gameContainer');
        let gameOverScreen = document.getElementById('gameOverScreen');
        let restartBtn = document.getElementById('restartBtn');
        let scoreDisplay = document.getElementById('score');
        let livesDisplay = document.getElementById('lives');
        let finalScoreDisplay = document.getElementById('finalScore');

        // Game constants
        const GAME_WIDTH = 800;
        const GAME_HEIGHT = 600;
        const PLAYER_WIDTH = 40;
        const PLAYER_HEIGHT = 40;
        const PLAYER_SPEED = 7;
        const ENEMY_WIDTH = 40;
        const ENEMY_HEIGHT = 40;
        const ENEMY_SPEED = 2;
        const PROJECTILE_SPEED = 8;
        const OBSTACLE_SIZE = 30;

        // Game state
        let gameState = {
            player: {
                x: GAME_WIDTH / 2 - PLAYER_WIDTH / 2,
                y: GAME_HEIGHT - 60,
                width: PLAYER_WIDTH,
                height: PLAYER_HEIGHT,
                speed: PLAYER_SPEED
            },
            enemies: [],
            projectiles: [],
            obstacles: [],
            score: 0,
            lives: 3,
            gameOver: false,
            enemyDirection: 1
        };

        // Keyboard input
        const keys = {};
        window.addEventListener('keydown', (e) => {
            keys[e.key] = true;
            if (e.key === ' ') {
                e.preventDefault();
                shootProjectile();
            }
        });

        window.addEventListener('keyup', (e) => {
            keys[e.key] = false;
        });

        // Initialize game
        function initGame() {
            gameState = {
                player: {
                    x: GAME_WIDTH / 2 - PLAYER_WIDTH / 2,
                    y: GAME_HEIGHT - 60,
                    width: PLAYER_WIDTH,
                    height: PLAYER_HEIGHT,
                    speed: PLAYER_SPEED
                },
                enemies: [],
                projectiles: [],
                obstacles: [],
                score: 0,
                lives: 3,
                gameOver: false,
                enemyDirection: 1
            };

            gameOverScreen.classList.remove('show');
            gameContainer.innerHTML = `
                <div id="gameInfo">
                    <div id="score">Score: 0</div>
                    <div id="lives">Lives: 3</div>
                </div>
                <div id="instructions">
                    <div>← → Arrow Keys to Move</div>
                    <div>SPACE to Shoot</div>
                </div>
                <div id="gameOverScreen">
                    <div id="gameOverText">GAME OVER</div>
                    <div id="finalScore">Final Score: 0</div>
                    <button id="restartBtn">RESTART GAME</button>
                </div>
            `;

            scoreDisplay = document.getElementById('score');
            livesDisplay = document.getElementById('lives');
            finalScoreDisplay = document.getElementById('finalScore');
            gameOverScreen = document.getElementById('gameOverScreen');
            restartBtn = document.getElementById('restartBtn');
            restartBtn.addEventListener('click', initGame);

            createEnemies();
            createObstacles();
            gameLoop();
        }

        function createEnemies() {
            for (let i = 0; i < 5; i++) {
                gameState.enemies.push({
                    x: 80 + i * 130,
                    y: 40,
                    width: ENEMY_WIDTH,
                    height: ENEMY_HEIGHT,
                    speed: ENEMY_SPEED
                });
            }
        }

        function createObstacles() {
            const obstacleRow = GAME_HEIGHT / 2 - 15;
            for (let i = 0; i < 4; i++) {
                for (let j = 0; j < 3; j++) {
                    gameState.obstacles.push({
                        x: 100 + i * 180 + j * 35,
                        y: obstacleRow + j * 35,
                        width: OBSTACLE_SIZE,
                        height: OBSTACLE_SIZE,
                        health: 3
                    });
                }
            }
        }

        function shootProjectile() {
            if (!gameState.gameOver) {
                gameState.projectiles.push({
                    x: gameState.player.x + gameState.player.width / 2 - 2.5,
                    y: gameState.player.y,
                    width: 5,
                    height: 15,
                    speed: PROJECTILE_SPEED
                });
            }
        }

        function updatePlayer() {
            if (keys['ArrowLeft'] && gameState.player.x > 0) {
                gameState.player.x -= gameState.player.speed;
            }
            if (keys['ArrowRight'] && gameState.player.x < GAME_WIDTH - gameState.player.width) {
                gameState.player.x += gameState.player.speed;
            }
        }

        function updateEnemies() {
            let changeDirection = false;

            for (let enemy of gameState.enemies) {
                enemy.x += enemy.speed * gameState.enemyDirection;

                if (enemy.x <= 0 || enemy.x + enemy.width >= GAME_WIDTH) {
                    changeDirection = true;
                }
            }

            if (changeDirection) {
                gameState.enemyDirection *= -1;
                for (let enemy of gameState.enemies) {
                    enemy.y += 30;
                }
            }

            // Check if enemies reached bottom
            for (let enemy of gameState.enemies) {
                if (enemy.y > GAME_HEIGHT) {
                    gameState.gameOver = true;
                }
            }
        }

        function updateProjectiles() {
            gameState.projectiles = gameState.projectiles.filter(proj => {
                proj.y -= proj.speed;
                return proj.y > 0;
            });
        }

        function checkCollisions() {
            // Check projectile vs enemies
            for (let i = gameState.projectiles.length - 1; i >= 0; i--) {
                for (let j = gameState.enemies.length - 1; j >= 0; j--) {
                    if (isColliding(gameState.projectiles[i], gameState.enemies[j])) {
                        gameState.projectiles.splice(i, 1);
                        gameState.enemies.splice(j, 1);
                        gameState.score += 100;
                        break;
                    }
                }
            }

            // Check projectile vs obstacles
            for (let i = gameState.projectiles.length - 1; i >= 0; i--) {
                for (let j = gameState.obstacles.length - 1; j >= 0; j--) {
                    if (isColliding(gameState.projectiles[i], gameState.obstacles[j])) {
                        gameState.projectiles.splice(i, 1);
                        gameState.obstacles[j].health--;
                        if (gameState.obstacles[j].health <= 0) {
                            gameState.obstacles.splice(j, 1);
                        }
                        break;
                    }
                }
            }

            // Check if all enemies destroyed
            if (gameState.enemies.length === 0) {
                gameState.gameOver = true;
                document.getElementById('gameOverText').textContent = 'YOU WIN!';
            }
        }

        function isColliding(rect1, rect2) {
            return rect1.x < rect2.x + rect2.width &&
                   rect1.x + rect1.width > rect2.x &&
                   rect1.y < rect2.y + rect2.height &&
                   rect1.y + rect1.height > rect2.y;
        }

        function updateUI() {
            scoreDisplay.textContent = `Score: ${gameState.score}`;
            livesDisplay.textContent = `Lives: ${gameState.lives}`;
        }

        function render() {
            // Clear game container
            const existingElements = gameContainer.querySelectorAll('.player, .enemy, .projectile, .obstacle');
            existingElements.forEach(el => el.remove());

            // Render player
            const playerEl = document.createElement('div');
            playerEl.className = 'player';
            playerEl.style.left = gameState.player.x + 'px';
            playerEl.style.top = gameState.player.y + 'px';
            gameContainer.appendChild(playerEl);

            // Render enemies
            for (let enemy of gameState.enemies) {
                const enemyEl = document.createElement('div');
                enemyEl.className = 'enemy';
                enemyEl.style.left = enemy.x + 'px';
                enemyEl.style.top = enemy.y + 'px';
                gameContainer.appendChild(enemyEl);
            }

            // Render projectiles
            for (let projectile of gameState.projectiles) {
                const projEl = document.createElement('div');
                projEl.className = 'projectile';
                projEl.style.left = projectile.x + 'px';
                projEl.style.top = projectile.y + 'px';
                gameContainer.appendChild(projEl);
            }

            // Render obstacles
            for (let obstacle of gameState.obstacles) {
                const obstacleEl = document.createElement('div');
                obstacleEl.className = 'obstacle';
                obstacleEl.style.left = obstacle.x + 'px';
                obstacleEl.style.top = obstacle.y + 'px';
                gameContainer.appendChild(obstacleEl);
            }
        }

        function gameLoop() {
            if (gameState.gameOver) {
                finalScoreDisplay.textContent = `Final Score: ${gameState.score}`;
                gameOverScreen.classList.add('show');
                return;
            }

            updatePlayer();
            updateEnemies();
            updateProjectiles();
            checkCollisions();
            updateUI();
            render();

            requestAnimationFrame(gameLoop);
        }

        // Start the game
        initGame();
    </script>
</body>
</html>